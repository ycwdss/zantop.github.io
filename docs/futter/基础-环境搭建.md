<!--
 * @Author: wz
 * @Date: 2021-01-30 18:07:42
 * @LastEditors: wz
 * @LastEditTime: 2021-04-04 18:53:45
 * @Description: 
-->

## 环境配置


下载`flutter`  [SDK](https://flutter.dev/docs/get-started/install/macos)


创建安装目录

```js
cd ~/development
```
解压到安装目录
```js
unzip ~/Downloads/flutter_macos_2.0.4-stable.zip
```

导出目录
```js
export PATH="$PATH:`pwd`/flutter/bin"
```

修改flutter中国临时镜像

```js
 export PUB_HOSTED_URL=https://pub.flutter-io.cn //（国内用户需设置）
export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn //（国内用户需设置）
export PATH=`pwd`/flutter/bin:$PATH //pwd 放的是flutter文件路径 例如/Users
```

以上两个步骤，在`~/.zshrc`编辑加入
```js
# Flutter
export PUB_HOSTED_URL=https://pub.flutter-io.cn

export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn

export PATH=${PATH}:/Users/wangzan/flutter/bin:$PATH
```
重新载入配置

```js
source ~/.zshrc
```
查看版本
```js
flutter --version
```

## 创建应用

下载`android studio` 安装模拟器

找个目录下`flutter create XX_APP`

进入目录`flutter run `flutter编译卡在`Running Gradle task assembleDebug` 的应用

Gradle的Maven仓库在国外, 因此需要使用阿里云的镜像地址。

1、修改项目中android/build.gradle文件

```js
buildscript {
    ext.kotlin_version = '1.3.50'
    repositories {
         maven { url 'https://maven.aliyun.com/repository/google' }
           maven { url 'https://maven.aliyun.com/repository/jcenter' }
           maven { url 'http://maven.aliyun.com/nexus/content/groups/public' }
           maven {url 'http://download.flutter.io'}
        // google()
        // jcenter()
    }

    dependencies {
        classpath 'com.android.tools.build:gradle:3.5.0'
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
    }
}

allprojects {
    repositories {
        // google()
        // jcenter()
           maven { url 'https://maven.aliyun.com/repository/google' }
           maven { url 'https://maven.aliyun.com/repository/jcenter' }
           maven { url 'http://maven.aliyun.com/nexus/content/groups/public' }
           maven {url 'http://download.flutter.io'}
    }
}

rootProject.buildDir = '../build'
subprojects {
    project.buildDir = "${rootProject.buildDir}/${project.name}"
}
subprojects {
    project.evaluationDependsOn(':app')
}

task clean(type: Delete) {
    delete rootProject.buildDir
}
```


[MAC中Flutter下载和安装](https://www.jianshu.com/p/db617d83b08c)

[环境配置](https://mp.weixin.qq.com/s/EO5c839JHQPaM4g82rvanA)

[flutter编译卡在Running Gradle task 'assembleDebug'的应用](https://zhuanlan.zhihu.com/p/142831353)
